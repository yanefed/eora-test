# EORA Task

Этот проект представляет собой Telegram-бот, использующий LLM для ответов на вопросы потенциальных клиентов Eora и
учитывающий материалы с сайта.

## Запуск проекта

1. **Установка зависимостей**:
   ```bash
   poetry install
   ```

2. **Настройка переменных окружения**:
    - Создайте файл `.env` в корне проекта
    - Добавьте следующие переменные:
      ```
      TELEGRAM_TOKEN=ваш_токен_телеграм_бота
      OPENAI_API_KEY=ваш_ключ_openai
      ```

3. **Запуск бота**:
   ```bash
   poetry run python main.py
   ```

## Что пытался сделать

- Парсинг информации с сайта
- Создание векторного представления полученной информации для последующего поиска
- Генерация ответов, использующий в качестве контекста полученную с сайта информацию
- Сложный вариант задачи
- Telegram бот в качестве интерфейса

### Успешные решения:

- Асинхронный парсинг
- Разбиение полученного текста на чанки с сохранением целостности предложений (NLTK)
- Сохранение и использование индексов HNSW
- Кэширование векторного представления
- Постепенный вывод ответа в Telegram
- Ответы основываются на информации с сайта, ссылки добавляются.

### Проблемные моменты:

- Иногда ссылка, указанная в тексте, не имеет отношения к теме самого предложения.
- Были проблемы с нумерацией ссылок: LLM подставляет цифры не по порядку (исправляю после окончательного вывода
  сообщения)
- Были проблемы с форматированием ссылки в процессе вывода генерирующегося ответа (вывод сообщения ломался), поэтому
  форматирую сообщение после окончательного вывода.
- Контекст беседы не используется при ответе на новые сообщения
- Не может перечислить все существующие кейсы в одном ответе

## Оценка качества решения

Для себя в качестве критериев для оценки выделил релевантность ответов, эффективность использования ресурсов LLM,
скорость запуска.

Ответы опираются на переданный контекст; созданные векторные представления кэшируются, что позволяет экономить токены
API OpenAI; благодаря асинхронной работе удалось ускорить запуск бота с парсингом сайта в несколько раз.


## Что бы мы добавили с большим количеством времени

1. Доработка вставки ссылок на источники
2. Дополнительная оптимизация запросов:
    - Кэширование частых запросов
    - Оптимизация векторной базы данных
3. Сохранение в контексте истории диалога
4. Апи для добавления новых источников